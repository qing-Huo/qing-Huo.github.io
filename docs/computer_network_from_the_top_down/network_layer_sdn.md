#### 网络层功能为例的数据平面和控制平面

网络层功能：
- 转发：对于从某个端口到来的分组转发到合适的输出端口
- 路由：决定分组从源端到目标端的路径
    * 路由算法
类比：
- 转发：一个多岔路口的进入和转出过程
- 路由：规划从源到目标的旅行路径

#### 每个路由器的控制平面

- 每个路由器上都有实现路由算法元件（它们之间相互交互）形成传统IP实现方式的控制平面
- 每台设备上既实现控制功能，又实现数据平面
- 控制功能分布式实现
- 路由表 - 粘连

#### 网络设备控制平面的实现方式特点

```
互联网网络设备：传统方式都是通过分布式，每台设备的方法来实现爱你数据平面和控制平面功能
    垂直集成：每台路由器或其他网络设备，包括：
        硬件，在私有的操作系统：
        互联网标准协议(IP,RIP,IS-IS,OSPF,BGP)的私有实现
    每个设备都实现了数据平面和控制平面的事情
        控制平面的功能是分布式实现的
    设备基本上只能（分布式升级困难）按照固定方式工作,控制逻辑固化
    不同的网络功能需要不同的“middleboxes”：防火墙，负载均衡设备，NAT boxes等

（数据+控制平面）集成 > （控制逻辑） 分布 > 固化
    代价大;升级困难;管理困难等
```

## SDN:逻辑上集中的控制平面

一个不同的（通常是远程）控制器和CA交互，控制器决定分组转发的逻辑（可编程），CA所在设备执行逻辑

#### SDN的主要思路

- 网络设备数据平面和控制平面分离
- 数据平面 - 分组交换机
    * 将路由器，骄傲换几和目前大多数网络设备的功能进一步抽象成:
    * 按照流表（由控制平面设置的控制逻辑）进行PDU（帧，分组）的动作（包括转发，丢弃，拷贝，泛红，阻塞）
    * 统一化设备功能：SDN交换机（分组交换机），执行控制逻辑
- 控制平面 - 控制器 + 网络应用
    * 分离，集中
    * 计算和下发控制逻辑：流表 
#### SDN架构：数据平面交换机

数据平面交换机
- 快速，简单，商业化交换设备采用硬件实现通用转发功能
- 流表被控制器计算和安装
- 基于南向API(如openflow),SDN控制器访问基于流的交换机
    * 定义了哪些可以被控制，哪些不能
- 也定义了和控制器的协议(e.g.,OpenFlow)

#### SDN控制器

SDN控制器(网络OS)
- 维护网络状态信息
- 通过上面的北向API和网络控制应用交互
- 通过下面的南向API和网络交换机交互
- 逻辑上集中，但是在实现上通常由于性能，可扩展性，容错性及鲁棒性采用分布式方法

网络控制应用：
- 控制的大脑：采用下层提供的服务（SDN控制器提供的API）实现网络功能
    * 路由器 交换机
    * 接入控制 防火墙
    * 负载均衡
    * 其他功能
- 非绑定：可以被第三方提供，与控制器厂商以通常上不同,与分组交换机厂商也可以不同

    











## 路由协议

```路由协议的目标```:确定从发送主机到接收主机之间，通过路由器的网络“较好“的路径（等价于路由器的序列）
- 路径：路由器的序列，分组将会沿着该序列从源主机到达最后的目标主机
- ”较好“：最小代价，最快的，最不拥塞
- 路由：一个”top-10“网络挑战


#### 路由(route)的概念

```
路由：按照某种指标（传输延迟，所经过的站点数目等）找到一条从源节点到目标节点的较好路径
    较好路径：按照某种指标较小的路径
    指标：站数，延迟，费用，队列长度等，或是一些单纯指标的加权平均
    采用什么养的指标，表示网络使用者希望网络在什么方便表现突出，身恶魔指标网络使用者比较重视
路由器-路由器之间的最优路径 = 主机对之间的最优路径
    路由器连接子网，子网到路由器之间的跳数就一跳，必须要走
    路由器到下一跳路由器（节点到节点）之间的最优路径找到了
    也就找到了从源子网向目标子网所有主机对之间的最优路径
    大大降低了路由计算的规模
    在路由计算中按照子网到子网的路径吉萨u你为目标，而不是主机到主机
路由选择算法（routing algorithm）：网络层软件的一部分，完成路由功能
```

#### 路由算法分类

全局或者局部路由信息？
全局：
- 所有的路由器拥有完整的拓扑和边的代价信息
- link state 算法

分布式：
- 路由器只知道与它有物理连接关系的邻居路由器，和到相应邻居路由器的代价值
- 迭代地与邻居交换路由信息，计算路由信息
- distance vector 算法

静态或者动态？
静态：
- 路由随时间变化缓慢
动态：
- 路由变化很快
    * 周期性更新
    * 根据链路代价的变化而变化

- 非自适应算法（non-adaptivew algorithm）：
    * 不能适应网络拓扑和通信量的变化，路由表是事先计算好的
- 自适应路由选择（adaptive algorithm）：
    * 能适应网络拓扑和通信量的变化

#### 链路状态路由选择（link state routing）

LS路由的基本工作过程:
- 发现相邻节点，获知对方网络地址
- 测量到相邻节点的代价（延迟，开销）
- 组装一个LS分组，描述它到相邻节点的代价情况
- 将分组通过扩散的方法发到所有其他路由器
    * 以上4步让每个路由器获得```拓扑```和```边代价```
- 通过Dijkstra算法找出最短路径（这才是路由算法）
    * 每个节点独立算出来到其他节点(路由器=网络)的最短路径
    * 迭代算法：第K步能够知道本节点到k个其他节点的最短路径

#### LS路由的工作过程

- 配置```LS路由选择算法```的路由工作过程
    * 个点通过各种渠道获得```整个网络拓```，网络中所有链路```代价```等信息（这部分和算法无关，属于协议和实现）
    * 使用```LS路由算法```，计算本站点到其他站点的最优路径（汇集树），得到路由表
    * 按照此路由表转发分组（datagram方式）
        - 严格意义上说不是路由的一个步骤
        - 分发到输入端口的网络层






















## man Command
- man命令分为9部分
1. 可运行的指令或可执行文件的帮助文档
2. 系统核心可使用的函数与工具等的帮助文档
3. 一些常用的函数与库的帮助文档
4. 设备文件的说明
5. 配置文件或某些文件的格式说明
6. 游戏程序的帮助文档
7. 惯例与协议，如文件系统，网络协议等的说明
8. 系统管理员可用的管理命令的帮助文档
9. 跟系统核心有关的文件的帮助文档

## 目录结构

```bash
/bin	 二进制可执行文件(存放大多数系统命令,如cat,mkdir,mv,cp，chmod...)
/boot	 系统核心文件和开机所需文件,开机时载入开机管理程序(bootloader)并映像到内存中
/dev	 系统设备相关文件(如disk,dvd,fd0,stdin,hdc,floppy等)
/etc	 系统配置文件(如gconf，yum.conf,hosts等)
/home	 除根用户外其他用户的家目录，管理员添加用户时，在此目录下创建并默认由Desktop目录
/lib	 系统和程序运行需要的库函数文件(包含C编译器程序需要的函数库，是一组二进制文件，如iptables等)
/root	 root用户的家目录
/sbin	 root用户才能执行的命令文件(包含一些重要命令，如shutdown，dump等)
/srv	 服务启动之后需要访问的数据(/srv/www下有Web服务器的数据)
/tmp	 程序临时存放文件的目录(用于临时性存储，存在中间产生的临时文件)
/opt	 第三方软件建议安装目录(如LinuxQQ，Linux opera等)
/var	 存放经常变化的文件(存放系统定义表，以便在系统运行改变时备份目录，如cache，ftp，mail，www等)
/usr	 存放安装程序(软件默认目录)，包含一些其他重要内容，如bin，sbin，lib，include等，且bin下含有gcc，python等
/mnt	 文件挂载目录(U盘，光驱),里面可能包含cdrom，hgfs，floopy等
/proc	 硬件信息，存放记录系统状态的文件(如meminfo，cpuinfo，devices，version等)
/media	 移动设备相关文件(光驱，优盘)
```

### 文件存放
- /etc
  * /etc/motd: 配置用户登录系统后显示提示内容
  * etc/os-release: 声明OS版本号和名称信息的文件
  * /etc/systcl.conf: Linux内核参数设置文件
- /proc
  * /proc/meminfo: 系统内存信息
  * /proc/cpuinfo 关于处理器的信息，如类型，厂家，型号,性能等
  * /proc/loadavg: 系统负载信息，uptime的结果
  * /proc/mounts：已加载的文件系统的列表

## 文件属性
- ```ll```命令下，首列字符的含义
  - ```d``` 目录文件(directory)
  - ```f``` 普通文件
  - ```c``` 字符设备文件,终端```/dev/tty1```,网络串口文件
  - ```b``` 块设备文件,```/dev/sda1```,硬盘，光驱等
  - ```l``` 符号链接文件,link类型(快捷方式)
  - ```p``` 管道文件pipe
  - ```s``` 套接字文件，进程间通信(socket)文件
  - ```-```普通文件(二进制，图片，日志等)

## umask
- umask 命令用来限制新文件权限的掩码
  * 也称之为遮罩码，防止文件，文件夹创建的时候，权限过大
- 当新文件被创建时，其最初的权限由文件创建掩码决定
- 用户每次注册进入系统时，umask命令都被执行，并自动设置掩码改变默认值
  * 新的权限将会把旧的覆盖
- usmak默认配置再/etc/profile 61-64行
- 文件默认权限=```文件最大权限-usmak的值```

## chattr
- chattr命令用于更改文件的扩展属性，比chmod更改的rwx权限更底层
  * ```lsattr filename```可以查看chattr赋予的权限
  #参数
  a：  只能向文件中添加数据，不得删除
  -R: 递归更改目录属性
  -V: 显示命令执行过程
```bash
模式
  + 增加参数
  - 移除参数
  = 更新为指定参数
  A 不让系统修改文件最后访问时间
  a 只能追加文件数据，不得删除
  i 文件不能删除，改名，修改内容
```


## 时间戳
- Linux/Unix文件系统每个文件都有3种时间戳
  * 访问时间(-atime/天，-amin/分钟)：用户最近一次访问时间(文件修改，未读取，则不变)
  * 修改时间(-mtime/天，-mmin/分钟)：文件最后一次修改时间(数据变动)
  * 变化时间(-ctime/天，-cmin/分钟)：文件数据元(如权限)最后一次修改时间
- 文件任何数据变化，change变化，无论是元数据变动，或是对文件mv，cp等
- 文件内容被修改时，modify和change更新
- 当change更新后，第一次访问该文件(cat,less等)，access time首次会更新，之后不会

## 常用命令
- ```chmod``` 改变文件权限
  * ```chmod u+x filename```给文件的user属主添加可执行权限
  * ```chmod 0 filename```取消文件所有权限
- ```chown``` 改变所属用户组
  * ```chown 属主:属组 filename```修改文件的用户和用户组
  * ```chown :属组 filename```修改文件的属组
  * ```chown 属主 filename```修改文件属主
- ```whoami``` 显示当前登录的用户
- ```whereis``` 查找可执行二进制(ls,cat...)的存放位置及man手册
- ```file``` 查看文本存储编码格式
- ```shred -u filename```彻底粉碎文件(会对文件随即填充后再删除)
- ```stat [选项] [参数]```显示文件状态信息，比```ls```更详细
- ```echo $PATH``` 打印当前环境变量，以冒号分割
  * ```PATH="环境变量路径"```执行一次，临时生效
  * ```/etc/profile```中最下面写入```PATH="环境变量路径"```,永久生效
- ```hostname``` 当前机器的主机名
  * ```hostnamectl set-hostname 新的主机名```更改主机名
- ```which``` 定位命令来自哪个文件
  * 例如，```which apt``` 返回 ```/usr/bin/apt```
- 非交互式写入文件
  * ```cat >> hello.py << EOF```
  * ```> print("Hello python")```
  * ```> EOF``` 文件写入

## 通配符
- ```*```表示任意长度字符串,(包含0长度)
  * ```*.txt```代表名字以.txt结尾的所有文件
- ```?```表示任意单个字符

- 特殊通配符
  * ```[[:upper:]]```  所有大写字母
  * ```[[:lower:]]```  所有小写字母
  * ```[[:alpha:]]```  所有字母
  * ```[[:digit:]]```  所有数字
  * ```[[:alnum:]]```  所有字母和数字
  * ```[[:space:]]```  所有的空白字符
  * ```[[:punct:]]```  所有标点符号

 ```bash
ls -l /bin/??sh # 查看/bin下以sh结尾同时长度为4的文件
```
- ```[c1-c2]```匹配c1-c2字符序列中的任意单一字符
- ```{str1,str2,strN}```匹配其中某个字符串
- ```!```通常和```{}[]```连用，表示取反

## 引号
- ```单引号''``` 所见即所得，强引用，单引号中内容会原样输出(各种特殊字符在单引号内，都是普通字符)
- ```双引号""``` 弱引用，能识别特殊符号，变量，转义符等，解析后再输出(美元符，反引号，转义符)
- ```反`引号``` 用于引用命令结果，同于```$(命令)```
- 没有引号 一般连续字符串，数字，路径省略引号，特殊字符，空格，变量等，必须加双引号
```bash
#创建以当前时分秒为名称的文件
touch "`date +%T`".log    #双引号已经解析出了date +%T，但是需要反引号引用
#创建以Y-M-D-H-M-S为名称的文件
touch "`date +%F`-`date +%T`".log
```

## 打包和压缩
- 打包tar(tape archive)：将多个文件或一个目录打包成一个大文件
- tar不会对文件压缩
```bash
tar -cf [打包文件名] [要打包的文件/列表]
# c 表示创建打包文件
# f 表示指定打包文件名
tar -tf [已打包的文件]  # 列出其中的文件名
tar -f [已打包的文件]  --delete hello.c  # 删除hello.c
tar -f pkg1.tar -A pkg2.tar # 将pkg2.tar的内容合并到pkg1.tar,不会改变pkg2.tar
tar -xf pkg1.tar  # 解包至当前目录
tar -xf pkg1.tar -C ~/packge # 解包至指定目录
```

- ```gzip```压缩
```bash
gzip pkg1.tar # 压缩文件
# pkg1.tar.gz

gzip -d pkg1.tar.gz #解压
```
- ```tar -[1-9] filename```其中数字越大，压缩文件越大，更省时

- ```tar -czf```综合了打包和压缩
```bash
tar -czf newfilename [需要打包并被压缩的文件]

#解压
tar -xzf newfilename
```

## 文件链接
- 符号连接```ln```等同于windows上的快捷方式
```bash
ln -s [链接指向的文件] [文件名]
```
- 如果```ln```指向的目标文件被del，则链接断裂
- ```readlink```读取软连接

- ```硬链接```
  * Linux中的文件存储：当划分磁盘分区并格式化后，硬盘会被拆分为2部分
  * 即```Inode区```和```DataBlock区```
  * Linux中的文件会被拆分为2部分存放，其中
  * 文件实际数据放置在```DataBlock区```
  * ```Inode-number```及相关属性放在```Inode区```中
  * 一个硬盘中不存在两个文件共用一个```Inode```
  * ```ls -li```可以查看```Inode number```
- Linux中的目录
  * Linux中目录是一张表
  * 文件名会和```Inode-number```有一个映射关系
  * 通过文件名找到```Inodenumber```找到```Inode```找到数据
  * 硬链接就是让```Inode-number```对应多个文件名
  * 创建硬链接的命令```ln [链接指向的文件] [链接名]```
  * 如果硬链接的源文件del，则硬链接依旧```保留```
- 硬链接注意事项
  * 不能跨硬盘创建硬链接
  * 不推荐为目录创建硬链接，容易造成死循环

## log

- 日志记录了许多重要的系统事件，包括用户的登录信息，系统的启动信息，系统的安全信息，邮件相关信息，各种服务相关信息等
- 日志记录了系统每天发生的各种事情，通过日志来检查错误发生的原因，或受到攻击时攻击者留下的痕迹

```bash
/var/log/boot.log	系统启动日志
/var/log/cron	记录与系统定时任务相关的日志
/var/log/cups	打印信息的日志
/var/log/dmesg	系统开机时内核自检的信总，也可以用dmesg命令直接查看内核自检信息
/var/log/btmp	错误登录的日志，二进制文件，需要lastab命令查看
/var/log/lasllog	系统中所有用户最后一次登录时间的日志，二进制文件，需要使用lastlog命令查看
/var/log/mailog	邮件信息的日志
/var/log/message	系统重要消息的日志，此文件会记录Linux系统中的绝大多数重要信息，若系统出现问题，首先要检查该文件
/var/log/secure	记录验证和授权方面的信息，涉及账户和密码的程序都会记录(系统登录，ssh，su，sudo授权)，甚至添加用户和修改用户密码都会被记录
#Ubuntu20.04和wsl2中都没有这个secure，但是可以查看/var/log/auth.log文件

/var/log/wtmp	永久记录所有用户的登录，注销信息，同时记录系统的后动，重启，关机时间，二进制文件，需要使用last命令查看
/var/tun/ulmp	记录当前已经登录的用户信息，此文件会随用户登录和注销不断变化，只记录当前登录用户的信息，不能vi查看，需要w，who，users等命令查看
```

